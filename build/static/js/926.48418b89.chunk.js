"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[926],{926:(e,s,t)=>{t.r(s),t.d(s,{default:()=>d});var a=t(43),i=t(568),n=t(216),r=t(463),c=t(726),l=t(401),o=(t(342),t(579));const d=()=>{const e=(0,n.zy)(),s=e.state||{},[t,d]=(0,a.useState)([]),[h,u]=(0,a.useState)(""),[x,j]=(0,a.useState)("");console.log(h),console.log(x);const[g,p]=(0,a.useState)(""),[m,v]=(0,a.useState)(!1);(0,a.useEffect)((()=>{(async()=>{try{console.log("Location Object:",e),console.log("Auction Data:",s);const t=await(0,r.d1)(parseInt(s.auctionId,10));d(t.data.$values||[])}catch(t){console.error("Error fetching auctions:",t)}})()}),[e,s]);return(0,o.jsxs)("div",{className:"auction-detail-container",children:[(0,o.jsx)(l.N9,{}),(0,o.jsx)("div",{className:"header",children:(0,o.jsxs)("div",{className:"navigation-bar",children:[(0,o.jsxs)("div",{className:"navigation-bar-left-content",children:[(0,o.jsx)("img",{className:"logo",src:c,alt:""}),(0,o.jsx)("div",{className:"project-name",children:"Nishikigoi Nexus"})]}),(0,o.jsxs)("div",{className:"navigation-bar-right-content",children:[(0,o.jsx)("a",{className:"staff",children:"STAFF"}),(0,o.jsx)("a",{className:"home",children:"HOME"}),(0,o.jsx)("a",{className:"auction",children:"AUCTION"}),(0,o.jsx)("a",{className:"blog",children:"BLOG"}),(0,o.jsx)("a",{className:"about",children:"ABOUT"}),(0,o.jsx)("a",{className:"account",children:"ACCOUNT"})]})]})}),(0,o.jsxs)("div",{className:"body-content-auction-detail",children:[(0,o.jsx)(i.A,{}),(0,o.jsx)("div",{className:"body-content-right-auction-detail",children:(0,o.jsxs)("div",{className:"auction-detail-content",children:[(0,o.jsxs)("div",{className:"auction-detail-content-row1",children:[(0,o.jsxs)("div",{className:"status",children:["Status: \xa0",1===s.status&&"Preparing",2===s.status&&"Waiting",3===s.status&&"Bidding",4===s.status&&"Ended"]}),(0,o.jsxs)("select",{name:"",id:"",className:"set-status",children:[(0,o.jsx)("option",{value:"",children:"Preparing \xa0\xa0"}),(0,o.jsx)("option",{value:"",children:"Waiting \xa0\xa0 "}),(0,o.jsx)("option",{value:"",children:"Bidding \xa0\xa0 "}),(0,o.jsx)("option",{value:"",children:"Ended \xa0\xa0 "})]})]}),(0,o.jsx)("div",{className:"auction-detail-content-row2",children:"Auction Detail"}),(0,o.jsxs)("div",{className:"auction-detail-content-row4",children:[(0,o.jsx)("label",{htmlFor:"start-date-input",className:"start-date-label",children:"Start Date"}),(0,o.jsx)("input",{type:"datetime-local",className:"start-date-input",value:(null===s||void 0===s?void 0:s.startDate)||"YYYY-MM-DDTHH:MM",readOnly:!0})]}),(0,o.jsx)("div",{className:"auction-detail-content-row5",children:(0,o.jsx)("div",{className:"add-fish",children:(0,o.jsx)("i",{className:"fa-solid fa-plus",onClick:()=>(async()=>{try{const e=await(0,r.tx)();console.log(e),p(e.data.$values),v(!0)}catch(e){throw e}})()})})}),m&&(0,o.jsx)("div",{className:"auction-detail-content-row7",children:(0,o.jsxs)("table",{className:"table-added-fish-entry",children:[(0,o.jsx)("thead",{children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{children:"No"}),(0,o.jsx)("th",{children:"FishEntry ID"}),(0,o.jsx)("th",{children:"Expected Date"}),(0,o.jsx)("th",{children:"Method"}),(0,o.jsx)("th",{children:"Add"})]})}),(0,o.jsx)("tbody",{children:g.length>0?g.map(((e,t)=>(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{children:t+1}),(0,o.jsx)("td",{children:e.fishEntryId||"Unknown Fish"}),(0,o.jsx)("td",{children:e.expectedDate||"N/A"}),(0,o.jsxs)("td",{children:[1===e.auctionMethod&&"FixedPriceSale",2===e.auctionMethod&&"SecretBid",3===e.auctionMethod&&"PublicBid",4===e.auctionMethod&&"DutchAuction"]}),(0,o.jsx)("td",{children:(0,o.jsx)("i",{class:"fa-solid fa-plus",onClick:()=>(async e=>{try{const t=await(0,r.iW)(e.fishEntryId,s.auctionId,sessionStorage.getItem("token"));if(console.log(t),t&&200===t.status){const e=await(0,r.d1)(parseInt(s.auctionId,10));d(e.data.$values||[]);const t=await(0,r.tx)();p(t.data.$values||[]),l.oR.success("Fish entry added to auction successfully!",{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}else l.oR.error("Failed to add fish entry. Please try again.",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}catch(t){console.error("Error adding fish entry:",t),l.oR.error("An error occurred while adding the fish entry. Please try again.",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}})(e)})})]},e.fishEntryId||t))):(0,o.jsx)("tr",{children:(0,o.jsx)("td",{colSpan:"5",children:"No FishEntry available"})})})]})}),(0,o.jsx)("div",{className:"auction-detail-content-row6",children:(0,o.jsxs)("table",{className:"table-manage-auction",children:[(0,o.jsx)("thead",{children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{children:"No"}),(0,o.jsx)("th",{children:"Fish Entry"}),(0,o.jsx)("th",{children:"Start Time"}),(0,o.jsx)("th",{children:"Finish Time"}),(0,o.jsx)("th",{children:"Status"}),(0,o.jsx)("th",{children:"Update"}),(0,o.jsx)("th",{children:"Delete"})]})}),(0,o.jsx)("tbody",{children:t.length>0?t.map(((e,t)=>(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{children:t+1}),(0,o.jsx)("td",{children:e.fishEntryId||"Unknown Fish"}),(0,o.jsx)("td",{children:(0,o.jsx)("input",{type:"datetime-local",className:"start-time-input",onChange:e=>u(e.target.value),defaultValue:e.startDate})}),(0,o.jsx)("td",{children:(0,o.jsx)("input",{type:"datetime-local",className:"finish-time-input",onChange:e=>j(e.target.value),defaultValue:e.endDate})}),(0,o.jsxs)("td",{children:[1===e.status&&"Preparing",2===e.status&&"Waiting",3===e.status&&"Bidding",4===e.status&&"Ended"]}),(0,o.jsx)("td",{children:(0,o.jsx)("button",{className:"update-btn",onClick:()=>(async e=>{try{const s=h||e.startDate,t=x||e.endDate,a=await(0,r.qH)(e.fishEntryId,s,t);console.log(a),a&&200===a.status?l.oR.success("Auction updated successfully!",{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}):l.oR.error("Failed to update auction. Please try again.",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}catch(s){console.error("Error updating auction:",s),l.oR.error("An error occurred while updating. Please try again.",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}})(e),children:"Update"})}),(0,o.jsx)("td",{children:(0,o.jsx)("i",{className:"fa-solid fa-trash delete-icon",onClick:()=>(async e=>{try{await(0,r.w2)(s.auctionId,e.fishEntryId);const t=await(0,r.d1)(parseInt(s.auctionId,10));d(t.data.$values||[]);const a=await(0,r.tx)();p(a.data.$values||[])}catch(t){throw t}})(e)})})]},e.id||t))):(0,o.jsx)("tr",{children:(0,o.jsx)("td",{colSpan:"7",children:"No FishEntry available"})})})]})})]})})]})]})}}}]);
//# sourceMappingURL=926.48418b89.chunk.js.map