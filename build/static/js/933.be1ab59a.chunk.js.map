{"version":3,"file":"static/js/933.be1ab59a.chunk.js","mappings":"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","sources":["components/auctionScreen/method3/FishAuctionMethod3.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport \"./FishAuctionMethod3.scss\";\r\nimport Navbar from \"../../common/Navbar/Navbar\";\r\nimport { useSearchParams } from \"react-router-dom\";\r\nimport {\r\n  handleBidHistory,\r\n  handleFishEntryById,\r\n  handlePublicBidding,\r\n} from \"../../../axios/UserService\";\r\n// import { HubConnectionBuilder, LogLevel } from \"@microsoft/signalr\";\r\nimport * as signalR from \"@microsoft/signalr\";\r\n\r\nconst FishAuctionMethod3 = () => {\r\n  const [searchParams] = useSearchParams();\r\n  const [fishEntry, setFishEntry] = useState(\"\");\r\n  const [currentPrice, setCurrentPrice] = useState(0);\r\n  const [stepPrice, setStepPrice] = useState(0);\r\n  const [increment, setIncrement] = useState(1);\r\n  const [bids, setBids] = useState([]);\r\n\r\n  const getFishEntry = async () => {\r\n    const entryId = searchParams.get(\"fishId\");\r\n    const res = await handleFishEntryById(entryId);\r\n    setFishEntry(res.data);\r\n    setStepPrice(res.data.increment);\r\n\r\n    const his = await handleBidHistory(entryId);\r\n    // Spread to flatten the array\r\n    setBids((preBid) => [...preBid, ...his.data.$values]);\r\n    // setCurrentPrice(his.data.$values.slice(-1)[0].currentPrice);\r\n  };\r\n  const handleIncrement = () => {\r\n    setIncrement((prevIncrement) => Math.min(prevIncrement + 1, 5)); // Limit to max of 5\r\n  };\r\n\r\n  const handleDecrement = () => {\r\n    setIncrement((prevIncrement) => Math.max(prevIncrement - 1, 1)); // Limit to min of 1\r\n  };\r\n\r\n  useEffect(() => {\r\n    getFishEntry();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const connection = new signalR.HubConnectionBuilder()\r\n      .withUrl(\"https://localhost:7124/publicBidHub\") // URL cá»§a Hub trong ASP.NET Core\r\n      .withAutomaticReconnect()\r\n      .build();\r\n\r\n    connection\r\n      .start()\r\n      .then(() => {\r\n        console.log(\"Connected to SignalR Hub\");\r\n        // Listen for the event ReceiveBidPlacement\r\n        connection.on(\"ReceiveBidPlacement\", (data) => {\r\n          //   console.log(\"Received bid placement: \", data);\r\n          // Update bids list when new data is received\r\n          setBids((prevBids) => [...prevBids, data]);\r\n        });\r\n        setCurrentPrice(bids.slice(-1)[0].currentPrice);\r\n      })\r\n      .catch((err) => console.log(\"Error while starting connection: \" + err));\r\n    // Cleanup when component unmounts\r\n    return () => {\r\n      connection.stop();\r\n    };\r\n  }, [bids, currentPrice]);\r\n\r\n  const totalBidPrice = stepPrice * increment;\r\n  const newPrice = currentPrice + totalBidPrice;\r\n  const bidding = async () => {\r\n    const entryId = searchParams.get(\"fishId\");\r\n    const token = sessionStorage.getItem(\"token\");\r\n    const res = await handlePublicBidding(token, entryId, newPrice);\r\n    console.log(res);\r\n    getFishEntry();\r\n  };\r\n\r\n  return (\r\n    <div className=\"auction-screen-container\">\r\n      <div className=\"header\">\r\n        <Navbar></Navbar>\r\n      </div>\r\n      <div className=\"fish-aucction-method3-content\">\r\n        <div className=\"fish-aucction-method3-content-row1\">Auction#13</div>\r\n        <div className=\"fish-aucction-method3-content-row2\">\r\n          Ending in: 4:13:03\r\n        </div>\r\n        <div className=\"fish-aucction-method3-content-row3\">\r\n          <div className=\"fish-auction-method3-content-row3-col1\">\r\n            <img\r\n              className=\"main-fish-img\"\r\n              src=\"../../assets/images/login1.png\"\r\n              alt=\"\"\r\n            />\r\n            <div className=\"fish-sub-img\">\r\n              {[\"body1.png\", \"login1.png\", \"login1.png\", \"login1.png\"].map(\r\n                (img, index) => (\r\n                  <div\r\n                    key={index}\r\n                    className=\"fish-sub-img1\"\r\n                    data-src={`../../assets/images/${img}`}\r\n                  >\r\n                    <img src={`../../assets/images/${img}`} alt=\"\" />\r\n                  </div>\r\n                )\r\n              )}\r\n            </div>\r\n          </div>\r\n          <div className=\"fish-aucction-method3-content-row3-col2\">\r\n            <div className=\"fish-info\">\r\n              <div className=\"fish-info-row1\">\r\n                <div className=\"fish-info-name\">Ca ngu</div>\r\n                <div className=\"fish-info-notion\">\r\n                  <i className=\"fa-solid fa-circle-exclamation\"></i>\r\n                </div>\r\n              </div>\r\n              <div className=\"fish-info-row2\">\r\n                <div className=\"fish-info-ending\">Ending in: 23:13</div>\r\n                <div className=\"fish-info-tag\">\r\n                  <i className=\"fa-solid fa-tag\"></i>\r\n                  <div className=\"fish-number\">Fish#14</div>\r\n                </div>\r\n              </div>\r\n              <div className=\"fish-info-row3\">\r\n                <div className=\"fish-info-weight\">\r\n                  <i className=\"fa-solid fa-weight-hanging\"></i>\r\n                  <div className=\"weight-number\">1234 ram</div>\r\n                </div>\r\n                <div className=\"fish-info-length\">\r\n                  <i className=\"fa-solid fa-ruler\"></i>\r\n                  <div className=\"length-number\">1234 mm</div>\r\n                </div>\r\n              </div>\r\n              <div className=\"fish-info-row4\">\r\n                <div className=\"fish-info-gender\">\r\n                  <i className=\"fa-solid fa-venus-mars\"></i>\r\n                  <div className=\"gender-text\">Female</div>\r\n                </div>\r\n                <div className=\"fish-info-age\">\r\n                  <i className=\"fa-solid fa-calendar\"></i>\r\n                  <div className=\"age-text\">22 months</div>\r\n                </div>\r\n              </div>\r\n              <div className=\"fish-info-row5\">\r\n                <div className=\"fish-info-origin\">\r\n                  <i className=\"fa-solid fa-earth-americas\"></i>\r\n                  <div className=\"origin-text\">Niigata, Japan</div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div className=\"bidding-history-background\">\r\n              <div className=\"bidding-history-content\">\r\n                {bids.slice(-5).map((bided, index) => {\r\n                  return (\r\n                    <div className=\"bidding-history-info\" key={index}>\r\n                      <div className=\"bidding-time\">\r\n                        {new Date(bided.bidTime).toLocaleString()} &nbsp;{\" \"}\r\n                        {/* Assuming you have a time property in bided */}\r\n                      </div>\r\n                      <div className=\"bidding-name-bidder\">\r\n                        {bided.name} bidded &nbsp;{\" \"}\r\n                        {/* Assuming you have a bidderName property */}\r\n                      </div>\r\n                      <div className=\"bidding-price\">${bided.bidAmount}</div>{\" \"}\r\n                      {/* Assuming you have a price property */}\r\n                    </div>\r\n                  );\r\n                })}\r\n              </div>\r\n            </div>\r\n            <div class=\"place-bid\">\r\n              <div class=\"place-bid-content\">\r\n                <div class=\"place-bid-content-row1\">\r\n                  <div class=\"current-price-icon\">\r\n                    <i class=\"fa-solid fa-file-invoice-dollar\"></i>\r\n                  </div>\r\n                  <div class=\"current-price-text\">Current price</div>\r\n                  <div class=\"current-price\">{currentPrice}$</div>\r\n                </div>\r\n                <hr />\r\n                <div class=\"place-bid-content-row2\">\r\n                  <div class=\"increment\">\r\n                    <div class=\"increment-text\">Increment</div>\r\n                    <div class=\"increment-number\">${stepPrice}</div>\r\n                  </div>\r\n                  <div class=\"multiple\">x</div>\r\n                  <div class=\"cen-div\">\r\n                    <div class=\"substract\" onClick={handleDecrement}>\r\n                      -\r\n                    </div>\r\n                    <div class=\"increment-bid-number\">{increment}</div>\r\n                    <div class=\"add\" onClick={handleIncrement}>\r\n                      +\r\n                    </div>\r\n                  </div>\r\n                  <div class=\"equal\">=</div>\r\n                  <div class=\"total-bid-price\">${totalBidPrice}</div>\r\n                </div>\r\n\r\n                <button class=\"place-bid-btn\" onClick={bidding}>\r\n                  Place bid at ${newPrice}\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <footer className=\"footer\">\r\n        <div className=\"logo-footer\">\r\n          <img\r\n            className=\"logo-img-footer\"\r\n            src=\"../../../assets/images/logo_png.png\"\r\n            alt=\"\"\r\n          />\r\n          <div className=\"name-project-footer\">Nishikigoi Nexus</div>\r\n        </div>\r\n        <div className=\"social-contact\">\r\n          <div className=\"instagram\">\r\n            <img src=\"../assets/images/Instagram.svg\" alt=\"\" />\r\n          </div>\r\n          <div className=\"facebook\">\r\n            <img src=\"../assets/images/Social Icons (1).svg\" alt=\"\" />\r\n          </div>\r\n          <div className=\"google\">\r\n            <img src=\"../assets/images/Vector.svg\" alt=\"\" />\r\n          </div>\r\n        </div>\r\n        <div className=\"nav-bar-footer\">\r\n          <a href=\"#\">Home</a>\r\n          <a href=\"#\">Blog</a>\r\n          <a href=\"#\">Contact</a>\r\n          <a href=\"#\">About</a>\r\n        </div>\r\n      </footer>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default FishAuctionMethod3;\r\n"],"names":["FishAuctionMethod3","searchParams","useSearchParams","fishEntry","setFishEntry","useState","currentPrice","setCurrentPrice","stepPrice","setStepPrice","increment","setIncrement","bids","setBids","getFishEntry","async","entryId","get","res","handleFishEntryById","data","his","handleBidHistory","preBid","$values","useEffect","connection","signalR","withUrl","withAutomaticReconnect","build","start","then","console","log","on","prevBids","slice","catch","err","stop","totalBidPrice","newPrice","_jsxs","className","children","_jsx","Navbar","src","alt","map","img","index","bided","Date","bidTime","toLocaleString","name","bidAmount","class","onClick","handleDecrement","prevIncrement","Math","max","handleIncrement","min","token","sessionStorage","getItem","handlePublicBidding","href"],"sourceRoot":""}